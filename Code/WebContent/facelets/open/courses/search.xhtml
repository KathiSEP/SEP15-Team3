<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">
    
    <head>
        <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
        <h:link href="resources/css/bootstrap.min.css" rel="stylesheet" />
    </head>
    
    <ui:composition template="/WEB-INF/template.xhtml">
        <ui:define name="title">Kursangebot</ui:define>
        <ui:define name="content">
            <body>
                <h1>Kursangebot</h1>
                <div class="row">
                    <div class="col-lg-12">
                        <p style="font-size:16px;">Sie können auf dieser Seite das Kursangebot von <strong>OfCourse</strong> durchsuchen. Hier werden alle verfügbaren Kurse angezeigt.</p>
                    </div>
                </div>
                <div class="row" style="padding-top:20px;">
                    <div class="col-lg-12">
                        <div class="panel panel-default">
                            <div class="panel-heading"><strong>Kurse filtern</strong></div>
                            <div class="panel-body">
                                <h:form class="form-horizontal" id="formFilterCourses">
                                    <div class="row">
                                        <div class="col-lg-4">
                                            <div class="input-group">
                                                <span class="input-group-addon" style="width:80px; text-align:right;">Zeitraum:</span>
                                                <h:selectOneMenu class="form-control" value="#{searchCourseBean.displayPeriod}" id="filterDate">
                                                    <f:selectItem itemValue="day" itemLabel="Tagesangebot" />
                                                    <f:selectItem itemValue="week" itemLabel="Wochenangebot" />
                                                    <f:selectItem itemValue="total" itemLabel="Gesamtes Angebot" />
                                                </h:selectOneMenu>
                                                <h:commandButton id="courseOffers" class="btn btn-default" value="Anzeigen" action="#{searchCourseBean.displayCoursesInPeriod()}"/>
                                            </div>
                                            <br/>
                                        </div>
                                        <h:panelGroup rendered="#{(searchCourseBean.sessionUser.userRole == 'REGISTERED_USER' || navigationBean.sessionUser.userRole == 'COURSE_LEADER'  || navigationBean.sessionUser.userRole == 'SYSTEM_ADMINISTRATOR')}">
                                        <div class="col-lg-3" >
                                            <div class="input-group">
                                                <span class="input-group-addon" style="width:100px; text-align:right;">Filtereigenschaft:</span>
                                                <h:selectOneMenu class="form-control" id="filterProperty" value="#{searchCourseBean.searchParam}">
                                                    <f:selectItem itemValue="title" itemLabel="Titel" />
                                                    <f:selectItem itemValue="courseID" itemLabel="Kurs-ID" />
                                                    <f:selectItem itemValue="leader" itemLabel="Kursleiter" />
                                                </h:selectOneMenu>
                                            </div>
                                        </div>
                                        </h:panelGroup> 
                                        <div class="col-lg-3">
                                            <div class="input-group">
                                                <h:inputText class="form-control" id="filterInput" style="width:230px;" value="#{searchCourseBean.searchString}"></h:inputText>
                                            </div>
                                        </div>
                                        <div class="col-lg-2">
                                            <h:commandButton id="searchCourses" class="btn btn-default" value="Suchen" action="#{searchCourseBean.search()}"/>
                                        </div>
                                    </div>                                                                  
                                </h:form>
                            </div>
                        </div>
                        <h:panelGroup rendered="#{searchCourseBean.renderTable}">
                        <div class="panel panel-info">
                            <div class="panel-body">
                                <h:dataTable value="#{searchCourseBean.searchResult}" var="course"
                                     styleClass="order-table"
                                     headerClass="order-table-header"
                                     rowClasses="order-table-odd-row,order-table-even-row"
                                     class="table table-bordered table-hover">
                        
                                     
                                     <!-- <h:column> -->
                                         <!-- column header -->
                                      <!--   <f:facet name="header">ID</f:facet> -->
                                         <!-- row record -->
                                     <!--    #{course.courseID} -->
                                     <!-- </h:column> -->
                                     
                                     
                                     <h:column>  
                                         <f:facet name="header">ID</f:facet>  
                                         <h:link outcome="courseDetail" value="#{course.courseID}" >
                                             <f:param name="courseID" value="#{course.courseID}" />
                                         </h:link>
                                     </h:column>
                                     
                                     <h:column>  
                                         <f:facet name="header">Title</f:facet>  
                                         <h:link outcome="courseDetail" value="#{course.title}" >
                                             <f:param name="courseID" value="#{course.courseID}" />
                                         </h:link>
                                     </h:column>
                                     
                                     <h:column>
                                         <f:facet name="header">Max. Teilnehmer</f:facet>
                                         #{course.maxUsers}
                                     </h:column>
                                     
                                     <h:column>
                                         <f:facet name="header">Beginnt</f:facet>
                                         #{course.startdate}
                                     </h:column>
                                     
                                     <h:column>
                                         <f:facet name="header">Endet</f:facet>
                                         #{course.enddate}
                                     </h:column>
                                     
                                     <f:facet name="footer">
                                    <div class="row" style="text-align:center;">
                                    <ul class="pagination">
                                    
                                        <li><h:commandButton class="btn btn-info" value="Zurück"
                                                action="#{searchCourseBean.goToSpecificPage()}">
                                                <f:param name="page" value="back" />
                                            </h:commandButton></li>
                                            
                                        <li><h:commandButton class="btn btn-info" value="Weiter"
                                                action="#{searchCourseBean.goToSpecificPage()}">
                                                <f:param name="page" value="forward" />
                                            </h:commandButton></li>
                                    </ul>
                                </div>
                            </f:facet>
                                    
                                 </h:dataTable>
                            </div>
                        </div>  
                        </h:panelGroup>         
                    </div>
                </div>
            </body>
        </ui:define>
    </ui:composition>
</html>