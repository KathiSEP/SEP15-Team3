<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
	<ui:composition template="/WEB-INF/template.xhtml">
		<ui:define name="title">Liste aller Kursteilnehmer</ui:define>
		<ui:define name="content">
			<body>
			     <h1>Liste aller Kursteilnehmer</h1>
			     <div class="row" style="padding-top:20px;">
                    <div class="col-lg-11">
                    </div>
                    <div class="col-lg-1">
                        <h:commandButton id="cancel" class="btn btn-info"
                                    value="ZurÃ¼ck"
                                    action="#{listParticipantsBean.cancel}">          
                                    <f:param name="" value="" />
                                </h:commandButton>
                    </div>
                 </div>
			     <div class="row" style="padding-top:20px;">
                    <div class="col-lg-12">
                        
                    <h:form class="form-horizontal" id="formListParticipants">   
                        <h:dataTable value="#{listParticipantsBean.participants}"
                            var="participant" id="participantsTable" class=" table table-hover"
                            cellspacing="0" width="100%">
                           <h:column>
                                <f:facet name="header">
                                               Bild
                                </f:facet>
                                <h:outputText value="#{participant.profilImage}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink action="#{listParticipantsBean.sortBySpecificColumn()}" styleClass="theader">
                                        <f:setPropertyActionListener target="#{listParticipantsBean.pagination.sortColumn}" value="nickname" />
                                        Benutzername
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{participant.username}" />
                            </h:column>
                            <h:column rendered="#{listParticipantsBean.sessionUser.userRole == 'COURSE_LEADER' || listParticipantsBean.sessionUser.userRole == 'SYSTEM_ADMINISTRATOR'}">
                                <f:facet name="header" >
                                    <h:commandLink action="#{listParticipantsBean.sortBySpecificColumn()}" styleClass="theader">
                                        <f:setPropertyActionListener target="#{listParticipantsBean.pagination.sortColumn}" value="email" />
                                        E-Mail
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{participant.email}" 
                                    />
                            </h:column>
                            <h:column rendered="#{listParticipantsBean.sessionUser.userRole == 'COURSE_LEADER' || listParticipantsBean.sessionUser.userRole == 'SYSTEM_ADMINISTRATOR'}">
                                <f:facet name="header" >
                                    <h:commandLink action="#{listParticipantsBean.sortBySpecificColumn()}" styleClass="theader">
                                        <f:setPropertyActionListener target="#{listParticipantsBean.pagination.sortColumn}" value="courseNews" />
                                        Kursnews eingetragen
                                    </h:commandLink>                                             
                                </f:facet>
                                <h:outputText value="#{participant.courseNewsSubscribed}" 
                                    />
                            </h:column>
                           
                            <h:column rendered="#{listParticipantsBean.sessionUser.userRole == 'COURSE_LEADER' || listParticipantsBean.sessionUser.userRole == 'SYSTEM_ADMINISTRATOR'}">
                                <f:facet name="header" >
                                     aus Kurs lÃ¶schen
                                </f:facet>
                                     <h:selectBooleanCheckbox value="false" />
                            </h:column>
                        
                            <f:facet name="footer">
                                    <div class="row" style="text-align: center;">
                                        <ul class="pagination">
                                            <li><h:commandButton class="btn btn-info" value="Zurueck"
                                                    action="#{listParticipantsBean.goToSpecificPage}">
                                                    <f:param name="site" value="back" />
                                                </h:commandButton></li>
                                            <li><h:commandButton class="btn btn-default"
                                                    value="#{listParticipantsBean.pagination.currentPageNumber}"
                                                    action="#{listParticipantsBean.goToSpecificPage}"
                                                    rendered="#{listParticipantsBean.pagination.currentPageNumber>=1}">
                                                    <f:param name="site"
                                                        value="#{listParticipantsBean.pagination.currentPageNumber-1}" />
                                                </h:commandButton></li>
                                            <li><h:commandButton style="font-weight:bold;"
                                                    class="btn btn-primary" 
                                                    value="#{listParticipantsBean.pagination.currentPageNumber +1}"
                                                    action="#{listParticipantsBean.goToSpecificPage}">
                                                    <f:param name="site"
                                                        value="#{listParticipantsBean.pagination.currentPageNumber}" />
                                                </h:commandButton></li>
                                            <li><h:commandButton class="btn btn-default"
                                                    value="#{listParticipantsBean.pagination.currentPageNumber+2}"
                                                    action="#{listParticipantsBean.goToSpecificPage}"
                                                    rendered="#{listParticipantsBean.pagination.numberOfPages>=listParticipantsBean.pagination.currentPageNumber+1}">
                                                    <f:param name="site"
                                                        value="#{listParticipantsBean.pagination.currentPageNumber+1}"/>
                                                </h:commandButton></li>
                                            <li><h:commandButton class="btn btn-info" value="Weiter"
                                                    action="#{listParticipantsBean.goToSpecificPage}">
                                                    <f:param name="site" value="forward"/>
                                                </h:commandButton></li>
                                        </ul>
                                    </div>
                                </f:facet>
                        
                        </h:dataTable>
                        </h:form>
                        </div>
                    </div>
                <div class="row" style="padding-top:20px;">
                    <div class="col-lg-10">
                    </div>
                    <div class="col-lg-2">
                        <h:commandButton id="delete" class="btn btn-info"
                                    value="Entfernen"
                                    action="#{listParticipantsBean.deleteUsersFromCourse}"
                                    rendered="#{listParticipantsBean.sessionUser.userRole == 'COURSE_LEADER' || listParticipantsBean.sessionUser.userRole == 'SYSTEM_ADMINISTRATOR'}">
                                    <f:param name="" value="" />
                        </h:commandButton>
                    
                    </div>
                </div>
                
			</body>
		</ui:define>
	</ui:composition>
</html>